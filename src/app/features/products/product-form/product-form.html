<div class="max-w-3xl mx-auto">
  <div class="flex items-center gap-3 mb-6">
    <button (click)="cancel()" class="p-2 rounded-lg text-slate-400 hover:text-slate-600 hover:bg-slate-100">
      <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/></svg>
    </button>
    <h1 class="text-2xl font-bold text-slate-800">{{ isEditMode() ? 'Edit Product' : 'Add Product' }}</h1>
  </div>

  <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6">
    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-5">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
        <!-- Name -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Product Name *</label>
          <input formControlName="name" type="text" placeholder="e.g. Pine Board 2x4"
            class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none" />
          @if (form.get('name')?.touched && form.get('name')?.hasError('required')) {
            <p class="text-xs text-red-500 mt-1">Name is required</p>
          }
        </div>

        <!-- SKU -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">SKU *</label>
          <input formControlName="sku" type="text" placeholder="e.g. LUM-PIN-248"
            class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500 outline-none font-mono" />
          @if (form.get('sku')?.touched && form.get('sku')?.hasError('required')) {
            <p class="text-xs text-red-500 mt-1">SKU is required</p>
          }
        </div>

        <!-- Category -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Category *</label>
          <select formControlName="categoryId"
            class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 outline-none">
            <option value="">Select category</option>
            @for (cat of categories(); track cat.id) {
              <option [value]="cat.id">{{ cat.name }}</option>
            }
          </select>
          @if (form.get('categoryId')?.touched && form.get('categoryId')?.hasError('required')) {
            <p class="text-xs text-red-500 mt-1">Category is required</p>
          }
        </div>

        <!-- Unit -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Unit *</label>
          <select formControlName="unit"
            class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 outline-none">
            @for (u of unitOptions; track u.value) {
              <option [value]="u.value">{{ u.label }}</option>
            }
          </select>
        </div>

        <!-- Current Stock -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Current Stock *</label>
          <input formControlName="currentStock" type="number" min="0"
            class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 outline-none" />
        </div>

        <!-- Minimum Stock -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Minimum Stock *</label>
          <input formControlName="minimumStock" type="number" min="0"
            class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 outline-none" />
        </div>

        <!-- Unit Price -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Unit Price ($) *</label>
          <input formControlName="unitPrice" type="number" min="0" step="0.01"
            class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 outline-none" />
        </div>

        <!-- Location -->
        <div>
          <label class="block text-sm font-medium text-slate-700 mb-1">Warehouse Location</label>
          <input formControlName="location" type="text" placeholder="e.g. Aisle A-1"
            class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 outline-none" />
        </div>
      </div>

      <!-- Description -->
      <div>
        <label class="block text-sm font-medium text-slate-700 mb-1">Description</label>
        <textarea formControlName="description" rows="3" placeholder="Product description..."
          class="w-full px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 outline-none resize-none"></textarea>
      </div>

      <!-- Buttons -->
      <div class="flex justify-end gap-3 pt-4 border-t border-slate-200">
        <button type="button" (click)="cancel()" class="px-4 py-2 text-sm font-medium text-slate-700 bg-white border border-slate-300 rounded-lg hover:bg-slate-50">Cancel</button>
        <button type="submit" [disabled]="loading()" class="px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-lg hover:bg-primary-700 disabled:opacity-50">
          {{ isEditMode() ? 'Update Product' : 'Create Product' }}
        </button>
      </div>
    </form>
  </div>
</div>
