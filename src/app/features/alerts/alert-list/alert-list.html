<div class="space-y-6">
  <div>
    <h1 class="text-2xl font-bold text-slate-800">Stock Alerts</h1>
    <p class="text-sm text-slate-500 mt-1">Monitor low stock and out-of-stock items</p>
  </div>

  <!-- Summary -->
  <div class="flex items-center gap-4">
    <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-red-50 border border-red-200 rounded-lg text-sm font-medium text-red-700">
      <span class="w-2 h-2 bg-red-500 rounded-full"></span>
      {{ criticalCount() }} Critical
    </span>
    <span class="inline-flex items-center gap-1.5 px-3 py-1.5 bg-amber-50 border border-amber-200 rounded-lg text-sm font-medium text-amber-700">
      <span class="w-2 h-2 bg-amber-500 rounded-full"></span>
      {{ warningCount() }} Warnings
    </span>
  </div>

  <!-- Filter Tabs -->
  <div class="flex rounded-lg border border-slate-300 overflow-hidden text-sm w-fit">
    <button (click)="onFilter('all')" [class]="filter() === 'all' ? 'bg-primary-600 text-white' : 'bg-white text-slate-600 hover:bg-slate-50'" class="px-4 py-2 font-medium transition-colors">All</button>
    <button (click)="onFilter('critical')" [class]="filter() === 'critical' ? 'bg-red-600 text-white' : 'bg-white text-slate-600 hover:bg-slate-50'" class="px-4 py-2 font-medium border-l border-slate-300 transition-colors">Critical</button>
    <button (click)="onFilter('warning')" [class]="filter() === 'warning' ? 'bg-amber-600 text-white' : 'bg-white text-slate-600 hover:bg-slate-50'" class="px-4 py-2 font-medium border-l border-slate-300 transition-colors">Warning</button>
    <button (click)="onFilter('acknowledged')" [class]="filter() === 'acknowledged' ? 'bg-slate-600 text-white' : 'bg-white text-slate-600 hover:bg-slate-50'" class="px-4 py-2 font-medium border-l border-slate-300 transition-colors">Acknowledged</button>
  </div>

  <!-- Table -->
  <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full text-sm">
        <thead class="bg-slate-50 text-slate-600 text-left">
          <tr>
            <th class="px-4 py-3 font-medium">Severity</th>
            <th class="px-4 py-3 font-medium">Product</th>
            <th class="px-4 py-3 font-medium text-right">Current</th>
            <th class="px-4 py-3 font-medium text-right">Minimum</th>
            <th class="px-4 py-3 font-medium text-right">Deficit</th>
            <th class="px-4 py-3 font-medium">Date</th>
            <th class="px-4 py-3 font-medium text-right">Action</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
          @for (a of filteredAlerts(); track a.id) {
            <tr class="hover:bg-slate-50 transition-colors" [class.opacity-50]="a.acknowledged">
              <td class="px-4 py-3">
                @if (a.severity === 'critical') {
                  <span class="px-2 py-0.5 text-xs font-medium rounded-full bg-red-100 text-red-700">Critical</span>
                } @else {
                  <span class="px-2 py-0.5 text-xs font-medium rounded-full bg-amber-100 text-amber-700">Warning</span>
                }
              </td>
              <td class="px-4 py-3 font-medium text-slate-800">{{ a.productName }}</td>
              <td class="px-4 py-3 text-right font-bold" [class]="a.currentStock === 0 ? 'text-red-600' : 'text-amber-600'">{{ a.currentStock }}</td>
              <td class="px-4 py-3 text-right text-slate-500">{{ a.minimumStock }}</td>
              <td class="px-4 py-3 text-right font-medium text-red-600">-{{ a.minimumStock - a.currentStock }}</td>
              <td class="px-4 py-3 text-slate-500 whitespace-nowrap">{{ a.createdAt | date:'MMM d, y' }}</td>
              <td class="px-4 py-3 text-right">
                @if (!a.acknowledged) {
                  <button (click)="acknowledge(a.id)" class="px-3 py-1 text-xs font-medium text-primary-600 border border-primary-300 rounded-lg hover:bg-primary-50 transition-colors">Acknowledge</button>
                } @else {
                  <span class="text-xs text-slate-400">Acknowledged</span>
                }
              </td>
            </tr>
          } @empty {
            <tr><td colspan="7" class="px-4 py-12 text-center text-slate-400">No alerts found</td></tr>
          }
        </tbody>
      </table>
    </div>
  </div>
</div>
