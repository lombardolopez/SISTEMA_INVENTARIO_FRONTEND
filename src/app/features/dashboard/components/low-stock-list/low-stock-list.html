<div>
  <div class="px-5 py-4 border-b border-slate-100 flex items-center justify-between">
    <h3 class="text-sm font-semibold text-slate-800">Low Stock Items</h3>
    <span class="text-xs text-amber-600 bg-amber-50 border border-amber-100 px-2 py-0.5 rounded-full font-medium">Needs Attention</span>
  </div>
  <div class="overflow-x-auto">
    <table class="w-full text-sm">
      <thead>
        <tr class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider bg-slate-50">
          <th class="px-5 py-2.5 text-left">Product</th>
          <th class="px-5 py-2.5 text-right">Current</th>
          <th class="px-5 py-2.5 text-right">Minimum</th>
          <th class="px-5 py-2.5 text-left">Status</th>
          <th class="px-5 py-2.5 text-left">Stock Bar</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-slate-50">
        @for (p of products(); track p.id) {
          <tr class="hover:bg-slate-50/60 transition-colors">
            <td class="px-5 py-3 font-medium text-slate-700">{{ p.name }}</td>
            <td class="px-5 py-3 text-right font-bold" [class]="p.currentStock === 0 ? 'text-red-600' : 'text-amber-600'">
              {{ p.currentStock }}
            </td>
            <td class="px-5 py-3 text-right text-slate-400">{{ p.minimumStock }}</td>
            <td class="px-5 py-3">
              @if (p.currentStock === 0) {
                <span class="px-2 py-0.5 text-xs font-medium rounded-full bg-red-100 text-red-700">Out of Stock</span>
              } @else {
                <span class="px-2 py-0.5 text-xs font-medium rounded-full bg-amber-100 text-amber-700">Low Stock</span>
              }
            </td>
            <td class="px-5 py-3">
              <div class="flex items-center gap-2 min-w-[80px]">
                <div class="flex-1 bg-slate-100 rounded-full h-1.5 overflow-hidden">
                  <div
                    class="h-full rounded-full transition-all"
                    [class]="p.currentStock === 0 ? 'bg-red-500' : 'bg-amber-500'"
                    [style.width.%]="p.minimumStock > 0 ? Math.min(100, (p.currentStock / p.minimumStock) * 100) : 0"
                  ></div>
                </div>
              </div>
            </td>
          </tr>
        } @empty {
          <tr><td colspan="5" class="px-5 py-10 text-center text-slate-400 text-sm">All items are well-stocked</td></tr>
        }
      </tbody>
    </table>
  </div>
</div>
