<!-- Page Header -->
<div class="mb-6">
  <h1 class="text-2xl font-bold text-slate-900">Dashboard</h1>
  <p class="text-sm text-slate-500 mt-0.5">Carpentry Inventory — Overview</p>
</div>

<!-- ─── Bento Grid ─── -->
@if (stats(); as s) {
  <div class="grid grid-cols-2 lg:grid-cols-6 gap-4">

    <!-- HERO: Total Stock Value (2 cols wide, 2 rows tall on desktop) -->
    <div class="col-span-2 lg:col-span-2 lg:row-span-2
                relative overflow-hidden rounded-2xl
                bg-gradient-to-br from-primary-600 via-primary-700 to-indigo-900
                p-6 flex flex-col justify-between min-h-[200px] shadow-xl shadow-primary-500/20">

      <!-- Decorative circles -->
      <div class="absolute -top-12 -right-12 w-40 h-40 bg-white/10 rounded-full pointer-events-none"></div>
      <div class="absolute -bottom-10 -left-10 w-32 h-32 bg-white/5 rounded-full pointer-events-none"></div>
      <div class="absolute top-1/2 right-4 w-16 h-16 bg-white/5 rounded-full pointer-events-none"></div>

      <!-- Content -->
      <div class="relative">
        <div class="w-10 h-10 bg-white/15 backdrop-blur rounded-xl flex items-center justify-center mb-4">
          <svg class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
        </div>
        <p class="text-sm font-medium text-primary-200 mb-1">Total Stock Value</p>
        <p class="text-4xl font-bold text-white tracking-tight">${{ s.totalStockValue.toFixed(0) }}</p>
        <p class="text-xs text-primary-300/70 mt-2">Across all inventory items</p>
      </div>

      <div class="relative flex items-center gap-2 mt-4">
        <span class="relative flex h-2 w-2">
          <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-60"></span>
          <span class="relative inline-flex rounded-full h-2 w-2 bg-emerald-400"></span>
        </span>
        <span class="text-xs text-primary-200">{{ s.totalProducts }} products tracked</span>
      </div>
    </div>

    <!-- Stat: Total Products -->
    <div class="col-span-1 lg:col-span-2 bg-white rounded-2xl border border-slate-100 shadow-sm p-5 flex flex-col justify-between">
      <div class="flex items-start justify-between">
        <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider">Products</p>
        <div class="w-9 h-9 bg-blue-50 rounded-xl flex items-center justify-center">
          <svg class="w-4 h-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
          </svg>
        </div>
      </div>
      <div>
        <p class="text-3xl font-bold text-slate-900 mt-3">{{ s.totalProducts }}</p>
        <p class="text-xs text-slate-400 mt-1">Total inventory items</p>
      </div>
    </div>

    <!-- Stat: Low Stock — amber tinted -->
    <div class="col-span-1 lg:col-span-2 bg-amber-50 rounded-2xl border border-amber-100 p-5 flex flex-col justify-between">
      <div class="flex items-start justify-between">
        <p class="text-[11px] font-semibold text-amber-500 uppercase tracking-wider">Low Stock</p>
        <div class="w-9 h-9 bg-amber-100 rounded-xl flex items-center justify-center">
          <svg class="w-4 h-4 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
          </svg>
        </div>
      </div>
      <div>
        <p class="text-3xl font-bold text-amber-900 mt-3">{{ s.lowStockItems }}</p>
        <p class="text-xs text-amber-600/70 mt-1">Require attention</p>
      </div>
    </div>

    <!-- Stat: Movements This Month -->
    <div class="col-span-1 lg:col-span-2 bg-white rounded-2xl border border-slate-100 shadow-sm p-5 flex flex-col justify-between">
      <div class="flex items-start justify-between">
        <p class="text-[11px] font-semibold text-slate-400 uppercase tracking-wider">This Month</p>
        <div class="w-9 h-9 bg-indigo-50 rounded-xl flex items-center justify-center">
          <svg class="w-4 h-4 text-indigo-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
          </svg>
        </div>
      </div>
      <div>
        <p class="text-3xl font-bold text-slate-900 mt-3">{{ s.movementsThisMonth }}</p>
        <p class="text-xs text-slate-400 mt-1">Stock movements</p>
      </div>
    </div>

    <!-- Stock Chart (doughnut) -->
    <div class="col-span-1 lg:col-span-2 bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden">
      <app-stock-chart />
    </div>

    <!-- Recent Movements (3 cols) -->
    <div class="col-span-2 lg:col-span-3 bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden">
      <app-recent-movements />
    </div>

    <!-- Movements Chart (3 cols) -->
    <div class="col-span-2 lg:col-span-3 bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden">
      <app-movements-chart />
    </div>

    <!-- Low Stock List (full width) -->
    <div class="col-span-2 lg:col-span-6 bg-white rounded-2xl border border-slate-100 shadow-sm overflow-hidden">
      <app-low-stock-list />
    </div>

  </div>
} @else {
  <!-- Loading skeleton -->
  <div class="grid grid-cols-2 lg:grid-cols-6 gap-4 animate-pulse">
    <div class="col-span-2 lg:col-span-2 lg:row-span-2 bg-slate-200 rounded-2xl min-h-[200px]"></div>
    <div class="col-span-1 lg:col-span-2 bg-slate-100 rounded-2xl h-32"></div>
    <div class="col-span-1 lg:col-span-2 bg-slate-100 rounded-2xl h-32"></div>
    <div class="col-span-1 lg:col-span-2 bg-slate-100 rounded-2xl h-32"></div>
    <div class="col-span-1 lg:col-span-2 bg-slate-100 rounded-2xl h-32"></div>
    <div class="col-span-2 lg:col-span-3 bg-slate-100 rounded-2xl h-64"></div>
    <div class="col-span-2 lg:col-span-3 bg-slate-100 rounded-2xl h-64"></div>
    <div class="col-span-2 lg:col-span-6 bg-slate-100 rounded-2xl h-48"></div>
  </div>
}
